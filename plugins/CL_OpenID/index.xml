<?xml version="1.0" encoding="utf-8"?>
<plugin version="1.0">
  <title xml:lang="ko">OpenID</title>
  <title xml:lang="en">OpenID</title>
  <link>http://www.needlworks.org/</link>
  <version>1.0</version>
  <description xml:lang="en">This plugin enables OpenID facility.</description>
  <description xml:lang="ko">OpenID 사용을 가능하게 합니다. 오픈아이디 가입링크를 수정하시려면, CL_OpenID 플러그인 디렉토리안의 affiliate.php를 수정하세요.</description>
  <license>GPL</license>
  <author xml:lang="en" link="http://www.needlworks.org/">Hojin Choi</author>
  <author xml:lang="ko" link="http://www.needlworks.org/">Coolengineer</author>
  <safety changeData="no" exposeData="no" accessLocal="no" accessRemote="no" accessRaw="no" />
  <scope>blog</scope>
  <requirements>
    <tattertools>1.5</tattertools>
  </requirements>
  <binding>
	<listener event="AddComment">openid_AddComment</listener>
	<listener event="AddGuestComment">openid_AddComment</listener>
	<listener event="AddingComment">openid_AddingComment</listener>
	<listener event="ViewCommenter">openid_ViewCommenter</listener>
	<listener event="ViewGuestCommenter">openid_ViewCommenter</listener>
	<listener event="ShowSecretComment">openid_ShowSecretComment</listener>
	<listener event="LOGIN_add_form">openid_LOGIN_add_form</listener>
	<listener event="Logout">openid_SessionLogout</listener>
	<listener event="OpenIDGetCurrent">openid_GetCurrent</listener>
	<listener event="OpenIDFetch">openid_Fetch</listener>
	<listener event="OpenIDSetUserId">openid_SetUserId</listener>
	<listener event="OpenIDResetUserId">openid_ResetUserId</listener>

	<listener event="/plugin/openid/try_auth">openid_try_auth</listener>
	<listener event="/plugin/openid/finish">openid_finish</listener>
	<listener event="/plugin/openid/login">openid_login</listener>
	<listener event="/plugin/openid/logout">openid_logout</listener>
	<listener event="/plugin/openid/comment/comment">openid_comment_comment</listener>
	<listener event="/plugin/openid/comment/delete">openid_comment_del</listener>
	<listener event="/plugin/openid/setcomment">openid_setcomment</listener>
	<tag name="SKIN_head_start" handler="openid_hardcore_login" />
	<tag name="SKIN_head_start" handler="openid_add_delegate" />
	<tag name="SKIN_body_end" handler="openid_add_controller" />
    <adminMenu>
      <viewMethods>
        <method>
          <title xml:lang="en">OpenID</title>
          <title xml:lang="ko">오픈아이디</title>
          <handler>openid_manage</handler>
        </method>
      </viewMethods>
    </adminMenu>
  </binding>
  <storage>
    <table>
      <name>OpenIDComments</name>
      <fields>
          <field>
            <name>id</name>
            <attribute>int</attribute>
            <length>11</length>
            <isnull>0</isnull>
          </field>
          <field>
            <name>openid</name>
            <attribute>varchar</attribute>
            <length>128</length>
          </field>
      </fields>
      <key>id</key>
    </table>
    <table>
      <name>OpenIDUsers</name>
      <fields>
          <field>
            <name>openid</name>
            <attribute>varchar</attribute>
            <length>128</length>
            <isnull>0</isnull>
          </field>
          <field>
            <name>delegatedid</name>
            <attribute>varchar</attribute>
            <length>128</length>
          </field>
          <field>
            <name>firstLogin</name>
            <attribute>int</attribute>
            <length>11</length>
          </field>
          <field>
            <name>lastLogin</name>
            <attribute>int</attribute>
            <length>11</length>
          </field>
          <field>
            <name>loginCount</name>
            <attribute>int</attribute>
            <length>11</length>
          </field>
          <field>
            <name>data</name>
            <attribute>text</attribute>
          </field>
      </fields>
      <key>openid</key>
    </table>
  </storage>
</plugin>
